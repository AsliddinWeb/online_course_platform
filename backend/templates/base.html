<!DOCTYPE html>
<html lang="uz" x-data="{ darkMode: localStorage.getItem('darkMode') !== 'false' }" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EduPlatform{% endblock %}</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#edfffe',
                            100: '#c0fffc',
                            200: '#81fffa',
                            300: '#3afff7',
                            400: '#00f5eb',
                            500: '#00d4aa',
                            600: '#00b396',
                            700: '#008f79',
                            800: '#007161',
                            900: '#045d52',
                        },
                        dark: {
                            950: '#050810',
                            900: '#0a0f1a',
                            800: '#111827',
                            700: '#1f2937',
                            600: '#374151',
                            500: '#4b5563',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'gradient': 'gradient 8s ease infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        gradient: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(0, 212, 170, 0.3)' },
                            '100%': { boxShadow: '0 0 40px rgba(0, 212, 170, 0.6)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        /* Custom scrollbar - Dark */
        .dark ::-webkit-scrollbar { width: 8px; height: 8px; }
        .dark ::-webkit-scrollbar-track { background: #1f2937; }
        .dark ::-webkit-scrollbar-thumb { background: #374151; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #4b5563; }

        /* Custom scrollbar - Light */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Glassmorphism - Dark */
        .dark .glass {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* Glassmorphism - Light */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(0, 0, 0, 0.08);
        }

        /* Glow effects */
        .glow {
            box-shadow: 0 0 30px rgba(0, 212, 170, 0.4);
        }
        .glow-sm {
            box-shadow: 0 0 15px rgba(0, 212, 170, 0.3);
        }
        .glow-purple {
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4);
        }

        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #00d4aa 0%, #6366f1 50%, #00d4aa 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s linear infinite;
        }

        /* Card hover effect */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Input focus ring */
        .input-focus {
            transition: all 0.2s ease;
        }
        .input-focus:focus {
            box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.2);
        }

        /* Animated background orbs */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 6s ease-in-out infinite;
        }

        /* Line clamp */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Smooth transitions for theme switch */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }
    </style>

    {% block extra_css %}{% endblock %}
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-dark-950 dark:text-gray-100 min-h-screen antialiased">
    {% block body %}
    <main>
        {% block content %}{% endblock %}
    </main>
    {% endblock %}

    <!-- Toast messages -->
    {% if messages %}
    <div class="fixed top-4 right-4 z-50 space-y-2" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)">
        {% for message in messages %}
        <div class="glass rounded-xl px-4 py-3 animate-fade-in flex items-center gap-3 shadow-lg
            {% if message.tags == 'error' %}border-red-500/50 text-red-600 dark:text-red-400
            {% elif message.tags == 'success' %}border-primary-500/50 text-primary-600 dark:text-primary-400
            {% else %}border-blue-500/50 text-blue-600 dark:text-blue-400{% endif %}"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-x-8"
            x-transition:enter-end="opacity-100 transform translate-x-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0">
            {% if message.tags == 'error' %}
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            {% elif message.tags == 'success' %}
            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            {% endif %}
            <span class="text-sm font-medium">{{ message }}</span>
            <button @click="show = false" class="ml-2 hover:opacity-70 transition-opacity">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% block extra_js %}{% endblock %}
</body>
</html>